import{g as It}from"./index.BbP3371Q.js";import{s as cn,l as j,o as ft,g as ln,Y as dt,Z as gt,r as nt}from"./index.DQoaeX7X.js";import{B as P}from"./entry.lkZpUAuP.js";import{r as un}from"./encoding.BWxdMvXO.js";var Ne={},ce={},Pe={},ht={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getExternalActionErrorMessageForEndTag=e.EDappActionErrorTag=void 0;var t;(function(a){a.NEW_ACTION_STARTED="NEW_ACTION_STARTED",a.INCOMPLETE_ACTION="INCOMPLETE_ACTION",a.NO_ACCOUNTS="NO_ACCOUNTS",a.WINDOW_CLOSED="WINDOW_CLOSED",a.USER_CANCELLED="USER_CANCELLED",a.POPUP_WINDOW_REFUSED="POPUP_WINDOW_REFUSED",a.POPUP_WINDOW_OPEN_FAILED="POPUP_WINDOW_OPEN_FAILED"})(t=e.EDappActionErrorTag||(e.EDappActionErrorTag={}));const r={[t.WINDOW_CLOSED]:"User closed the window",[t.INCOMPLETE_ACTION]:"User didn't complete the action",[t.NEW_ACTION_STARTED]:"A new action was started by the user, old action failed",[t.POPUP_WINDOW_OPEN_FAILED]:"Popup window failed to open",[t.POPUP_WINDOW_REFUSED]:"User refused to allow the popup window to open",[t.USER_CANCELLED]:"User cancelled the action",[t.NO_ACCOUNTS]:"No Meteor account found- try again after creating one"};function n(a){return r[a]??"An unknown error occurred"}e.getExternalActionErrorMessageForEndTag=n})(ht);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EDappActionConnectionStatus=e.EDappActionSource=e.EMeteorInjectedFeature=e.EMeteorExtensionDirectActionType=e.EWalletExternalActionStatus=e.EWalletExternalAction_SignIn_AccessType=e.EMeteorWalletSignInType=e.EExternalActionType=e.MeteorActionError=void 0;const t=ht;class r extends Error{constructor(a,o){var s;super(),a.message==null&&(a.message=(0,t.getExternalActionErrorMessageForEndTag)(((s=a.endTags)==null?void 0:s[a.endTags.length-1])??"unknown")),this._reason=a,this.message=a.message,this.name="MeteorActionError",this.cause=o}}e.MeteorActionError=r,function(n){n.login="login",n.sign="sign",n.logout="logout",n.verify_owner="verify_owner",n.keypom_claim="keypom_claim",n.sign_message="sign_message"}(e.EExternalActionType||(e.EExternalActionType={})),function(n){n.ALL_METHODS="ALL_METHODS",n.SELECTED_METHODS="SELECTED_METHODS",n.FULL_ACCESS="FULL_ACCESS"}(e.EMeteorWalletSignInType||(e.EMeteorWalletSignInType={})),function(n){n.FULL_ACCESS="fullAccess",n.LIMITED_ACCESS="limitedAccess"}(e.EWalletExternalAction_SignIn_AccessType||(e.EWalletExternalAction_SignIn_AccessType={})),function(n){n.UNCONFIRMED="UNCONFIRMED",n.PENDING="PENDING",n.SUCCESS="SUCCESS",n.FAILURE="FAILURE"}(e.EWalletExternalActionStatus||(e.EWalletExternalActionStatus={})),function(n){n.check_sync_status="check_sync_status",n.sync_accounts="sync_accounts",n.open_page="open_page"}(e.EMeteorExtensionDirectActionType||(e.EMeteorExtensionDirectActionType={})),function(n){n.open_page="open_page",n.batch_import="batch_import",n.sync_check="sync_check",n.account_sync="account_sync"}(e.EMeteorInjectedFeature||(e.EMeteorInjectedFeature={})),function(n){n.website_callback="wcb",n.website_post_message="wpm",n.website_visit="wv",n.extension_injected="ext"}(e.EDappActionSource||(e.EDappActionSource={})),function(n){n.initializing="initializing",n.connected="connected",n.attempting_reconnect="attempting_reconnect",n.disconnected="disconnected",n.closed_success="closed_success",n.closed_fail="closed_fail",n.closed_window="closed_window"}(e.EDappActionConnectionStatus||(e.EDappActionConnectionStatus={}))})(Pe);var C={},ve=cn.Buffer;function fn(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var a=e.charAt(n),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=n}var s=e.length,c=e.charAt(0),d=Math.log(s)/Math.log(256),v=Math.log(256)/Math.log(s);function p(N){if((Array.isArray(N)||N instanceof Uint8Array)&&(N=ve.from(N)),!ve.isBuffer(N))throw new TypeError("Expected Buffer");if(N.length===0)return"";for(var M=0,W=0,_=0,D=N.length;_!==D&&N[_]===0;)_++,M++;for(var i=(D-_)*v+1>>>0,l=new Uint8Array(i);_!==D;){for(var u=N[_],f=0,g=i-1;(u!==0||f<W)&&g!==-1;g--,f++)u+=256*l[g]>>>0,l[g]=u%s>>>0,u=u/s>>>0;if(u!==0)throw new Error("Non-zero carry");W=f,_++}for(var m=i-W;m!==i&&l[m]===0;)m++;for(var w=c.repeat(M);m<i;++m)w+=e.charAt(l[m]);return w}function E(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return ve.alloc(0);for(var M=0,W=0,_=0;N[M]===c;)W++,M++;for(var D=(N.length-M)*d+1>>>0,i=new Uint8Array(D);N[M];){var l=t[N.charCodeAt(M)];if(l===255)return;for(var u=0,f=D-1;(l!==0||u<_)&&f!==-1;f--,u++)l+=s*i[f]>>>0,i[f]=l%256>>>0,l=l/256>>>0;if(l!==0)throw new Error("Non-zero carry");_=u,M++}for(var g=D-_;g!==D&&i[g]===0;)g++;var m=ve.allocUnsafe(W+(D-g));m.fill(0,0,W);for(var w=W;g!==D;)m[w++]=i[g++];return m}function U(N){var M=E(N);if(M)return M;throw new Error("Non-base"+s+" character")}return{encode:p,decodeUnsafe:E,decode:U}}var dn=fn,gn=dn,hn="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",pn=gn(hn),yn=j&&j.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),vn=j&&j.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),k=j&&j.__decorate||function(e,t,r,n){var a=arguments.length,o=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(a<3?s(o):a>3?s(t,r,o):s(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},wn=j&&j.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&yn(t,e,r);return vn(t,e),t},cr=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C,"__esModule",{value:!0});C.deserializeUnchecked=C.deserialize=C.serialize=C.BinaryReader=C.BinaryWriter=C.BorshError=C.baseDecode=C.baseEncode=void 0;const V=cr(ft),lr=cr(pn),mn=wn(un),bn=typeof TextDecoder!="function"?mn.TextDecoder:TextDecoder,En=new bn("utf-8",{fatal:!0});function On(e){return typeof e=="string"&&(e=P.from(e,"utf8")),lr.default.encode(P.from(e))}C.baseEncode=On;function An(e){return P.from(lr.default.decode(e))}C.baseDecode=An;const We=1024;class F extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}C.BorshError=F;class ur{constructor(){this.buf=P.alloc(We),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=P.concat([this.buf,P.alloc(We)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(P.from(new V.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(P.from(new V.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(P.from(new V.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(P.from(new V.default(t).toArray("le",64)))}writeBuffer(t){this.buf=P.concat([P.from(this.buf.subarray(0,this.length)),t,P.alloc(We)]),this.length+=t.length}writeString(t){this.maybeResize();const r=P.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(P.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}C.BinaryWriter=ur;function H(e,t,r){const n=r.value;r.value=function(...a){try{return n.apply(this,a)}catch(o){if(o instanceof RangeError){const s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new F("Reached the end of buffer when deserializing")}throw o}}}class G{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new V.default(t,"le")}readU128(){const t=this.readBuffer(16);return new V.default(t,"le")}readU256(){const t=this.readBuffer(32);return new V.default(t,"le")}readU512(){const t=this.readBuffer(64);return new V.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new F(`Expected buffer length ${t} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){const t=this.readU32(),r=this.readBuffer(t);try{return En.decode(r)}catch(n){throw new F(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const r=this.readU32(),n=Array();for(let a=0;a<r;++a)n.push(t());return n}}k([H],G.prototype,"readU8",null);k([H],G.prototype,"readU16",null);k([H],G.prototype,"readU32",null);k([H],G.prototype,"readU64",null);k([H],G.prototype,"readU128",null);k([H],G.prototype,"readU256",null);k([H],G.prototype,"readU512",null);k([H],G.prototype,"readString",null);k([H],G.prototype,"readFixedArray",null);k([H],G.prototype,"readArray",null);C.BinaryReader=G;function fr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ee(e,t,r,n,a){try{if(typeof n=="string")a[`write${fr(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new F(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);a.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new F(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)ee(e,null,r[o],n[0],a)}else a.writeArray(r,o=>{ee(e,t,o,n[0],a)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?a.writeU8(0):(a.writeU8(1),ee(e,t,r,n.type,a));break}case"map":{a.writeU32(r.size),r.forEach((o,s)=>{ee(e,t,s,n.key,a),ee(e,t,o,n.value,a)});break}default:throw new F(`FieldType ${n} unrecognized`)}else dr(e,r,a)}catch(o){throw o instanceof F&&o.addToFieldPath(t),o}}function dr(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}const n=e.get(t.constructor);if(!n)throw new F(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([a,o])=>{ee(e,a,t[a],o,r)});else if(n.kind==="enum"){const a=t[n.field];for(let o=0;o<n.values.length;++o){const[s,c]=n.values[o];if(s===a){r.writeU8(o),ee(e,s,t[s],c,r);break}}}else throw new F(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Sn(e,t,r=ur){const n=new r;return dr(e,t,n),n.toArray()}C.serialize=Sn;function te(e,t,r,n){try{if(typeof r=="string")return n[`read${fr(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const a=[];for(let o=0;o<r[1];o++)a.push(te(e,null,r[0],n));return a}else return n.readArray(()=>te(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?te(e,t,r.type,n):void 0;if(r.kind==="map"){let a=new Map;const o=n.readU32();for(let s=0;s<o;s++){const c=te(e,t,r.key,n),d=te(e,t,r.value,n);a.set(c,d)}return a}return pt(e,r,n)}catch(a){throw a instanceof F&&a.addToFieldPath(t),a}}function pt(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new F(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const a={};for(const[o,s]of e.get(t).fields)a[o]=te(e,o,s,r);return new t(a)}if(n.kind==="enum"){const a=r.readU8();if(a>=n.values.length)throw new F(`Enum index: ${a} is out of range`);const[o,s]=n.values[a],c=te(e,o,s,r);return new t({[o]:c})}throw new F(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Nn(e,t,r,n=G){const a=new n(r),o=pt(e,t,a);if(a.offset<r.length)throw new F(`Unexpected ${r.length-a.offset} bytes after deserialized data`);return o}C.deserialize=Nn;function Tn(e,t,r,n=G){const a=new n(r);return pt(e,t,a)}C.deserializeUnchecked=Tn;var gr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtils=e.stringToConstantStyledString=e.convertToSlug=e.pad=e.createPadder=e.BetterStringArray=e.safeAppend=e.firstNotNullEmpty=e.nullEmpty=e.notNullEmpty=e.StringRegex=void 0,e.StringRegex={digitsRegex:/\b\d+\b/gi};const t=h=>h!=null&&h.length>0;e.notNullEmpty=t;const r=h=>!(0,e.notNullEmpty)(h);e.nullEmpty=r;const n=(...h)=>{for(const y of h)if((0,e.notNullEmpty)(y))return y};e.firstNotNullEmpty=n;const a=h=>{for(const y of h)if((0,e.nullEmpty)(y))return!0;return!1},o=(h,y,T=null)=>(0,e.notNullEmpty)(h)?h+y:T??y;e.safeAppend=o;class s extends Array{pushIfNotNullEmpty(y){(0,e.notNullEmpty)(y)&&this.push(y)}}e.BetterStringArray=s;function c(h,y,T=!1){return B=>d(B,h,y,T)}e.createPadder=c;function d(h,y,T,B=!1){const A=T-`${h}`.length;if(A>0){const S=new Array(A).fill(y);return B?`${h}${S.join("")}`:`${S.join("")}${h}`}return`${h}`}e.pad=d;const v=new RegExp("\\s+","g"),p=new RegExp("--+","g"),E=new RegExp("^-+","g"),U=new RegExp("-+$","g"),N=new RegExp("-","g"),M=new RegExp("[^\\w\\-]+","g"),W=new RegExp("_","g");function _(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const D=(h,{slugDivider:y="-",letterCase:T="LOWER",normalize:B=!0,excludeCharacters:A=[]}={})=>{if(!h||h.length===0)return"";let S=h.toString();return B&&(S=S.normalize("NFD")),T==="LOWER"?S=S.toLowerCase():T==="UPPER"&&(S=S.toUpperCase()),S.replace(v,"-").replace(A.length>0?new RegExp(`[^\\w\\-${A.map(je=>_(je)).join("")}]+`,"g"):M,"").replace(A.includes("_")?v:W,"-").replace(p,"-").replace(E,"").replace(U,"").replace(N,y)};e.convertToSlug=D;const i=h=>(0,e.convertToSlug)(h,{normalize:!0,slugDivider:"_",letterCase:"UPPER"});e.stringToConstantStyledString=i;const l=h=>{let y="";for(const T of h)y=`${T}${y}`;return y};function u(h){return h=h||"",h!==decodeURIComponent(h)}const f=h=>{let y=0;for(;u(h);)if(y+=1,h=decodeURIComponent(h),y>20)throw new Error("String Utils: Decode URI Fully: Enacted while loop too many times with attempt to decode fully.");return h},g=(h,y,{spaceAware:T=!0,insideWords:B=!1}={})=>{let A=`${h}`;for(const S of y)if(T)if(!B)A.indexOf(` ${S} `)>=0?A=A.replace(` ${S} `," "):(A.startsWith(`${S} `)&&(A=A.substring(S.length+1)),A.endsWith(` ${S}`)&&(A=A.substring(0,A.length-(S.length+1))));else{const je=[new RegExp(`\\s${S}\\s`,"g"),new RegExp(`\\s${S}`,"g"),new RegExp(`${S}\\s`,"g")];for(const Ue of je)Ue.test(A)&&(console.log(`Replacing "${Ue}" in "${A}"`),A=A.replace(Ue," "),console.log(`Text after: "${A}"`))}else A.indexOf(S)>=0&&(A=A.replace(S,""));return A.trim()};function m(h,y){const T=h.toLowerCase(),B=y.toLowerCase();return T<B?-1:T>B?1:0}function w(h,y){return h>y?1:h<y?-1:0}function R(h){let y=[];for(const T of h)(0,e.notNullEmpty)(T)&&y.push(T);return y}const ye=(...h)=>h.filter(y=>y).map((y,T,B)=>{const A=T!==0,S=T!==B.length-1;return A&&(y=y.startsWith("/")?y.slice(1):y),S&&(y=y.endsWith("/")?y.slice(0,-1):y),y}).join("/"),on=(h,y)=>y.startsWith("http://")||y.startsWith("https://")?y:ye(h,y),sn=h=>!!h.match(/^[a-zA-Z0-9]+$/);e.StringUtils={isUriEncoded:u,decodeUriFully:f,StringRegex:e.StringRegex,reverse:l,notNullEmpty:e.notNullEmpty,nullEmpty:e.nullEmpty,anyNullEmpty:a,safeAppend:e.safeAppend,createPadder:c,pad:d,convertToSlug:e.convertToSlug,stringToConstantStyledString:e.stringToConstantStyledString,removeAndTrim:g,sortCompareStrings:m,comparePure:w,onlyNotNullEmpty:R,firstNotNullEmpty:e.firstNotNullEmpty,joinIntoUrl:ye,getUrlWithBaseUrl:on,isHashId:sn}})(gr);var le={};Object.defineProperty(le,"__esModule",{value:!0});le.EnvironmentStateAdapter_Sync=le.EnvironmentStateAdapter=void 0;class Cn{constructor(t){this.implementation=t}async setJson(t,r){await this.implementation.setString(t,JSON.stringify(r))}async getJson(t){const r=await this.implementation.getString(t);if(!(r==null||r==="undefined"||r==="null"))return JSON.parse(r)}async setString(t,r){await this.implementation.setString(t,r)}async getString(t){const r=await this.implementation.getString(t);if(r!=null)return r}createJsonGetterSetter(t){return{get:()=>this.getJson(t),set:r=>this.setJson(t,r)}}createStringGetterSetter(t){return{get:()=>this.getString(t),set:r=>this.setString(t,r)}}}le.EnvironmentStateAdapter=Cn;class In{constructor(t){this.implementation=t}setJson(t,r){this.implementation.setString(t,JSON.stringify(r))}getJson(t){const r=this.implementation.getString(t);if(!(r==null||r==="undefined"||r==="null"))return JSON.parse(r)}setString(t,r){this.implementation.setString(t,r)}getString(t){const r=this.implementation.getString(t);if(r!=null)return r}clear(t){this.implementation.clear(t)}createJsonGetterSetter(t){return{get:()=>this.getJson(t),set:r=>this.setJson(t,r)}}createStringGetterSetter(t){return{get:()=>this.getString(t),set:r=>this.setString(t,r)}}}le.EnvironmentStateAdapter_Sync=In;var ne={},Me={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.WALLET_URL_LOCALHOST_BASE=Q.WALLET_URL_PRODUCTION_BASE=Q.WALLET_URL_DEV_BASE=void 0;Q.WALLET_URL_DEV_BASE="https://dev.wallet.meteorwallet.app";Q.WALLET_URL_PRODUCTION_BASE="https://wallet.meteorwallet.app";Q.WALLET_URL_LOCALHOST_BASE="https://localhost:3000";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.setEnvConfig=e.envConfig=void 0;const t=Q,r=typeof window<"u"?window.localStorage.getItem("DEV__METEOR_WALLET_BASE_URL"):void 0;e.envConfig={wallet_base_url:r??t.WALLET_URL_PRODUCTION_BASE};function n(a){Object.assign(e.envConfig,a)}e.setEnvConfig=n})(Me);Object.defineProperty(ne,"__esModule",{value:!0});ne.getNetworkPreset=ne.resolveWalletUrl=void 0;const Pn=Me,Mn=(e,t)=>{if(t)return t;const r=Pn.envConfig.wallet_base_url;switch(e){case"mainnet":return`${r}/connect/mainnet`;case"testnet":return`${r}/connect/testnet`;case"betanet":return`${r}/connect/betanet`;default:throw new Error("Invalid wallet URL")}};ne.resolveWalletUrl=Mn;const _n=e=>{switch(e){case"mainnet":return{networkId:e,nodeUrl:"https://rpc.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.near.org"};case"testnet":return{networkId:e,nodeUrl:"https://rpc.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};case"betanet":return{networkId:e,nodeUrl:"https://rpc.betanet.near.org",helperUrl:"https://helper.betanet.near.org",explorerUrl:"https://explorer.betanet.near.org"};default:throw Error(`Failed to find config for: '${e}'`)}};ne.getNetworkPreset=_n;var _e={};let Dn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",hr=e=>crypto.getRandomValues(new Uint8Array(e)),pr=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*n*t/e.length);return(o=t)=>{let s="";for(;;){let c=r(a),d=a;for(;d--;)if(s+=e[c[d]&n]||"",s.length===o)return s}}},Rn=(e,t=21)=>pr(e,t,hr),Fn=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const jn=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:Rn,customRandom:pr,nanoid:Fn,random:hr,urlAlphabet:Dn},Symbol.toStringTag,{value:"Module"})),Un=ln(jn);var yr={},Wn=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),vr="%[a-f0-9]{2}",Pt=new RegExp("("+vr+")|([^%]+?)","gi"),Mt=new RegExp("("+vr+")+","gi");function at(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],at(r),at(n))}function Gn(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Pt)||[],r=1;r<t.length;r++)e=at(t,r).join(""),t=e.match(Pt)||[];return e}}function Bn(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=Mt.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=Gn(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Mt.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var s=a[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}var Ln=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Bn(e)}},zn=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Kn=function(e,t){for(var r={},n=Object.keys(e),a=Array.isArray(t),o=0;o<n.length;o++){var s=n[o],c=e[s];(a?t.indexOf(s)!==-1:t(s,c,e))&&(r[s]=c)}return r};(function(e){const t=Wn,r=Ln,n=zn,a=Kn,o=i=>i==null,s=Symbol("encodeFragmentIdentifier");function c(i){switch(i.arrayFormat){case"index":return l=>(u,f)=>{const g=u.length;return f===void 0||i.skipNull&&f===null||i.skipEmptyString&&f===""?u:f===null?[...u,[p(l,i),"[",g,"]"].join("")]:[...u,[p(l,i),"[",p(g,i),"]=",p(f,i)].join("")]};case"bracket":return l=>(u,f)=>f===void 0||i.skipNull&&f===null||i.skipEmptyString&&f===""?u:f===null?[...u,[p(l,i),"[]"].join("")]:[...u,[p(l,i),"[]=",p(f,i)].join("")];case"colon-list-separator":return l=>(u,f)=>f===void 0||i.skipNull&&f===null||i.skipEmptyString&&f===""?u:f===null?[...u,[p(l,i),":list="].join("")]:[...u,[p(l,i),":list=",p(f,i)].join("")];case"comma":case"separator":case"bracket-separator":{const l=i.arrayFormat==="bracket-separator"?"[]=":"=";return u=>(f,g)=>g===void 0||i.skipNull&&g===null||i.skipEmptyString&&g===""?f:(g=g===null?"":g,f.length===0?[[p(u,i),l,p(g,i)].join("")]:[[f,p(g,i)].join(i.arrayFormatSeparator)])}default:return l=>(u,f)=>f===void 0||i.skipNull&&f===null||i.skipEmptyString&&f===""?u:f===null?[...u,p(l,i)]:[...u,[p(l,i),"=",p(f,i)].join("")]}}function d(i){let l;switch(i.arrayFormat){case"index":return(u,f,g)=>{if(l=/\[(\d*)\]$/.exec(u),u=u.replace(/\[\d*\]$/,""),!l){g[u]=f;return}g[u]===void 0&&(g[u]={}),g[u][l[1]]=f};case"bracket":return(u,f,g)=>{if(l=/(\[\])$/.exec(u),u=u.replace(/\[\]$/,""),!l){g[u]=f;return}if(g[u]===void 0){g[u]=[f];return}g[u]=[].concat(g[u],f)};case"colon-list-separator":return(u,f,g)=>{if(l=/(:list)$/.exec(u),u=u.replace(/:list$/,""),!l){g[u]=f;return}if(g[u]===void 0){g[u]=[f];return}g[u]=[].concat(g[u],f)};case"comma":case"separator":return(u,f,g)=>{const m=typeof f=="string"&&f.includes(i.arrayFormatSeparator),w=typeof f=="string"&&!m&&E(f,i).includes(i.arrayFormatSeparator);f=w?E(f,i):f;const R=m||w?f.split(i.arrayFormatSeparator).map(ye=>E(ye,i)):f===null?f:E(f,i);g[u]=R};case"bracket-separator":return(u,f,g)=>{const m=/(\[\])$/.test(u);if(u=u.replace(/\[\]$/,""),!m){g[u]=f&&E(f,i);return}const w=f===null?[]:f.split(i.arrayFormatSeparator).map(R=>E(R,i));if(g[u]===void 0){g[u]=w;return}g[u]=[].concat(g[u],w)};default:return(u,f,g)=>{if(g[u]===void 0){g[u]=f;return}g[u]=[].concat(g[u],f)}}}function v(i){if(typeof i!="string"||i.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function p(i,l){return l.encode?l.strict?t(i):encodeURIComponent(i):i}function E(i,l){return l.decode?r(i):i}function U(i){return Array.isArray(i)?i.sort():typeof i=="object"?U(Object.keys(i)).sort((l,u)=>Number(l)-Number(u)).map(l=>i[l]):i}function N(i){const l=i.indexOf("#");return l!==-1&&(i=i.slice(0,l)),i}function M(i){let l="";const u=i.indexOf("#");return u!==-1&&(l=i.slice(u)),l}function W(i){i=N(i);const l=i.indexOf("?");return l===-1?"":i.slice(l+1)}function _(i,l){return l.parseNumbers&&!Number.isNaN(Number(i))&&typeof i=="string"&&i.trim()!==""?i=Number(i):l.parseBooleans&&i!==null&&(i.toLowerCase()==="true"||i.toLowerCase()==="false")&&(i=i.toLowerCase()==="true"),i}function D(i,l){l=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},l),v(l.arrayFormatSeparator);const u=d(l),f=Object.create(null);if(typeof i!="string"||(i=i.trim().replace(/^[?#&]/,""),!i))return f;for(const g of i.split("&")){if(g==="")continue;let[m,w]=n(l.decode?g.replace(/\+/g," "):g,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes(l.arrayFormat)?w:E(w,l),u(E(m,l),w,f)}for(const g of Object.keys(f)){const m=f[g];if(typeof m=="object"&&m!==null)for(const w of Object.keys(m))m[w]=_(m[w],l);else f[g]=_(m,l)}return l.sort===!1?f:(l.sort===!0?Object.keys(f).sort():Object.keys(f).sort(l.sort)).reduce((g,m)=>{const w=f[m];return w&&typeof w=="object"&&!Array.isArray(w)?g[m]=U(w):g[m]=w,g},Object.create(null))}e.extract=W,e.parse=D,e.stringify=(i,l)=>{if(!i)return"";l=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},l),v(l.arrayFormatSeparator);const u=w=>l.skipNull&&o(i[w])||l.skipEmptyString&&i[w]==="",f=c(l),g={};for(const w of Object.keys(i))u(w)||(g[w]=i[w]);const m=Object.keys(g);return l.sort!==!1&&m.sort(l.sort),m.map(w=>{const R=i[w];return R===void 0?"":R===null?p(w,l):Array.isArray(R)?R.length===0&&l.arrayFormat==="bracket-separator"?p(w,l)+"[]":R.reduce(f(w),[]).join("&"):p(w,l)+"="+p(R,l)}).filter(w=>w.length>0).join("&")},e.parseUrl=(i,l)=>{l=Object.assign({decode:!0},l);const[u,f]=n(i,"#");return Object.assign({url:u.split("?")[0]||"",query:D(W(i),l)},l&&l.parseFragmentIdentifier&&f?{fragmentIdentifier:E(f,l)}:{})},e.stringifyUrl=(i,l)=>{l=Object.assign({encode:!0,strict:!0,[s]:!0},l);const u=N(i.url).split("?")[0]||"",f=e.extract(i.url),g=e.parse(f,{sort:!1}),m=Object.assign(g,i.query);let w=e.stringify(m,l);w&&(w=`?${w}`);let R=M(i.url);return i.fragmentIdentifier&&(R=`#${l[s]?p(i.fragmentIdentifier,l):i.fragmentIdentifier}`),`${u}${w}${R}`},e.pick=(i,l,u)=>{u=Object.assign({parseFragmentIdentifier:!0,[s]:!1},u);const{url:f,query:g,fragmentIdentifier:m}=e.parseUrl(i,u);return e.stringifyUrl({url:f,query:a(g,l),fragmentIdentifier:m},u)},e.exclude=(i,l,u)=>{const f=Array.isArray(l)?g=>!l.includes(g):(g,m)=>!l(g,m);return e.pick(i,f,u)}})(yr);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.THEME_SMALL_WINDOW_WIDTH_MAX=I.THEME_CONSTANT_BADGE_GREY_COLOR=I.THEME_CONSTANT_GREEN_COLOR=I.THEME_CONSTANT_RED_COLOR=I.THEME_CONSTANT_COLOR_DARK=I.THEME_CONSTANT_COLOR_BRAND=I.SIGN_POPUP_HEIGHT=I.SIGN_POPUP_WIDTH=void 0;I.SIGN_POPUP_WIDTH=390;I.SIGN_POPUP_HEIGHT=650;I.THEME_CONSTANT_COLOR_BRAND="#471be8";I.THEME_CONSTANT_COLOR_DARK="#101046";I.THEME_CONSTANT_RED_COLOR="#e25252";I.THEME_CONSTANT_GREEN_COLOR="#8bdaa1";I.THEME_CONSTANT_BADGE_GREY_COLOR="rgba(116,117,126,0.67)";I.THEME_SMALL_WINDOW_WIDTH_MAX=600;Object.defineProperty(_e,"__esModule",{value:!0});_e.getMeteorPostMessenger=void 0;const kn=Un,wr=Me,O=Pe,Hn=yr,Oe=ht,_t=I;class xn{constructor(t,r){const n=wr.envConfig.wallet_base_url,a=new URL(n);if(this.walletOrigin=a.origin,window.meteorCom==null){this.comType=O.EDappActionSource.website_post_message,console.log("No extension found. Need to connect to web popup for Meteor communication");const o={source:O.EDappActionSource.website_post_message,connectionUid:t.uid},s=_t.SIGN_POPUP_WIDTH,c=_t.SIGN_POPUP_HEIGHT,d=window.top.outerHeight/2+window.top.screenY-c/2,v=window.top.outerWidth/2+window.top.screenX-s/2,p=window.open(`${n}/connect/${t.network}/${t.actionType}?${(0,Hn.stringify)(o)}`,"_blank",`popup=1,width=${s},height=${c},top=${d},left=${v}`);if(p!=null)this.websiteWindow=p;else throw new O.MeteorActionError({message:"Couldn't open popup window to complete wallet action",endTags:[Oe.EDappActionErrorTag.POPUP_WINDOW_OPEN_FAILED]});window.addEventListener("message",E=>r(E.data)),this.wasOpened=!1}else this.comType=O.EDappActionSource.extension_injected,this.wasOpened=!0,window.meteorCom.addMessageDataListener(r)}focus(){var t;this.comType===O.EDappActionSource.website_post_message&&((t=this.websiteWindow)==null||t.focus())}sendMessage(t){var r,n;this.comType===O.EDappActionSource.website_post_message?(r=this.websiteWindow)==null||r.postMessage(t,this.walletOrigin):(n=window.meteorCom)==null||n.sendMessageData(t)}isWindowClosed(){var t;return this.comType===O.EDappActionSource.website_post_message?((t=this.websiteWindow)==null?void 0:t.closed)??!0:!1}hasActiveWindow(){return this.comType===O.EDappActionSource.website_post_message?this.websiteWindow!=null:!0}close(){this.comType===O.EDappActionSource.website_post_message&&delete this.websiteWindow}}const $n=450;class Jn{constructor(){this.connections=[];const t=wr.envConfig.wallet_base_url,r=new URL(t);this.baseWalletUrl=t,this.walletOrigin=r.origin,this.listener=n=>{if(n!=null){const a=this.connections.find(o=>o.uid===n.uid);a!=null&&(this.updateConnection(a.uid,{lastConnection:Date.now()}),n.status===O.EDappActionConnectionStatus.attempting_reconnect&&(this.updateConnection(a.uid,{status:O.EDappActionConnectionStatus.initializing}),this.sendComs()),n.status===O.EDappActionConnectionStatus.connected&&a.status===O.EDappActionConnectionStatus.initializing&&this.updateConnection(a.uid,{status:O.EDappActionConnectionStatus.connected}),n.status===O.EDappActionConnectionStatus.closed_success&&(a.resolve({success:!0,endTags:[],payload:n.payload}),this.updateConnection(a.uid,{status:O.EDappActionConnectionStatus.closed_success}),this.sendComs()),n.status===O.EDappActionConnectionStatus.closed_fail&&(this.updateConnection(a.uid,{status:O.EDappActionConnectionStatus.closed_fail}),this.sendComs(),a.reject(new O.MeteorActionError({endTags:n.endTags}))),n.status===O.EDappActionConnectionStatus.closed_window&&(this.updateConnection(a.uid,{status:O.EDappActionConnectionStatus.closed_window}),a.reject(new O.MeteorActionError({endTags:n.endTags,message:"User closed the window"}))),[O.EDappActionConnectionStatus.disconnected,O.EDappActionConnectionStatus.closed_fail,O.EDappActionConnectionStatus.closed_window,O.EDappActionConnectionStatus.closed_success].includes(n.status)&&this.removeConnection(a.uid))}}}removeConnection(t){this.connections=this.connections.filter(r=>r.uid!==t),this.connections.length===0&&(delete this.comWindow,clearInterval(this.comInterval),delete this.comInterval)}updateConnection(t,r){this.connections=this.connections.map(n=>n.uid===t?{...n,...r,uid:n.uid}:n)}sendComs(){var t;if((t=this.comWindow)!=null&&t.hasActiveWindow()&&this.connections.length>0)if(this.comInterval==null&&(this.comInterval=setInterval(()=>this.sendComs(),$n)),this.comWindow.isWindowClosed())if(this.comWindow.wasOpened){for(const r of this.connections)r.reject(new O.MeteorActionError({message:"User closed the window before completing the action",endTags:[Oe.EDappActionErrorTag.INCOMPLETE_ACTION,Oe.EDappActionErrorTag.WINDOW_CLOSED]}));this.connections=[],this.comWindow.close()}else console.log("Window is closed, need to allow popup");else{this.comWindow.wasOpened=!0;for(const{network:r,actionType:n,endTags:a,status:o,inputs:s,uid:c}of this.connections){const d={endTags:a,actionType:n,status:o,uid:c,network:r};o===O.EDappActionConnectionStatus.initializing&&(d.inputs=s),this.comWindow.sendMessage(d)}}else clearInterval(this.comInterval),delete this.comInterval}addAndStartConnection(t){if(this.connections.length>0)for(const r of this.connections)r.status=O.EDappActionConnectionStatus.disconnected,r.endTags=[Oe.EDappActionErrorTag.NEW_ACTION_STARTED];this.connections.push(t),this.comWindow==null||!this.comWindow.hasActiveWindow()?this.comWindow=new xn(t,this.listener):this.comWindow.focus(),this.sendComs()}async connectAndWaitForResponse({actionType:t,network:r,inputs:n}){let a={uid:(0,kn.nanoid)(),actionType:t,lastAttemptedConnection:0,lastConnection:0,status:O.EDappActionConnectionStatus.initializing,promise:void 0,reject:void 0,resolve:void 0,currentPayload:{},inputs:n,network:r,endTags:[]};const o=new Promise((s,c)=>{a.resolve=s,a.reject=d=>{this.connections=this.connections.filter(v=>v.uid!==a.uid),c(d)}});return a.promise=o,this.addAndStartConnection(a),await o}}let Ge;function Qn(){return Ge==null&&(Ge=new Jn),Ge}_e.getMeteorPostMessenger=Qn;var De={};Object.defineProperty(De,"__esModule",{value:!0});De.SCHEMA_V2=void 0;const ae=dt,b=gt;De.SCHEMA_V2=new Map([[b.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[b.SignedTransaction,{kind:"struct",fields:[["transaction",b.Transaction],["signature",b.Signature]]}],[b.Transaction,{kind:"struct",fields:[["signerId","string"],["publicKey",ae.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[b.Action]]]}],[ae.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[b.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",b.AccessKeyPermission]]}],[b.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",b.FunctionCallPermission],["fullAccess",b.FullAccessPermission]]}],[b.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[b.FullAccessPermission,{kind:"struct",fields:[]}],[b.Action,{kind:"enum",field:"enum",values:[["createAccount",b.CreateAccount],["deployContract",b.DeployContract],["functionCall",b.FunctionCall],["transfer",b.Transfer],["stake",b.Stake],["addKey",b.AddKey],["deleteKey",b.DeleteKey],["deleteAccount",b.DeleteAccount],["signedDelegate",b.SignedDelegate]]}],[b.CreateAccount,{kind:"struct",fields:[]}],[b.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[b.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[b.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[b.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",ae.PublicKey]]}],[b.AddKey,{kind:"struct",fields:[["publicKey",ae.PublicKey],["accessKey",b.AccessKey]]}],[b.DeleteKey,{kind:"struct",fields:[["publicKey",ae.PublicKey]]}],[b.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[b.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[b.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",ae.PublicKey]]}],[b.SignedDelegate,{kind:"struct",fields:[["delegateAction",b.DelegateAction],["signature",b.Signature]]}]]);var mr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createAction=e.parseArgs=void 0;const t=ft,r=gt,n=dt,a=c=>{if(c==="FullAccess")return r.actionCreators.fullAccessKey();const{receiverId:d,methodNames:v=[]}=c,p=c.allowance?new t.BN(c.allowance):void 0;return r.actionCreators.functionCallAccessKey(d,v,p)},o=c=>typeof c=="string"?P.from(c,"base64"):c;e.parseArgs=o;const s=c=>{switch(c.type){case"CreateAccount":return r.actionCreators.createAccount();case"DeployContract":{const{code:d}=c.params;return r.actionCreators.deployContract(d)}case"FunctionCall":{const{methodName:d,args:v,gas:p,deposit:E}=c.params;return r.actionCreators.functionCall(d,(0,e.parseArgs)(v),new t.BN(p),new t.BN(E))}case"Transfer":{const{deposit:d}=c.params;return r.actionCreators.transfer(new t.BN(d))}case"Stake":{const{stake:d,publicKey:v}=c.params;return r.actionCreators.stake(new t.BN(d),n.PublicKey.from(v))}case"AddKey":{const{publicKey:d,accessKey:v}=c.params;return r.actionCreators.addKey(n.PublicKey.from(d),a(v.permission))}case"DeleteKey":{const{publicKey:d}=c.params;return r.actionCreators.deleteKey(n.PublicKey.from(d))}case"DeleteAccount":{const{beneficiaryId:d}=c.params;return r.actionCreators.deleteAccount(d)}default:throw new Error("Invalid action type")}};e.createAction=s})(mr);Object.defineProperty(ce,"__esModule",{value:!0});ce.ConnectedMeteorWalletAccount=ce.MeteorWallet=void 0;const fe=nt,Zn=gt,J=Pe,Vn=C,Yn=gr,br=le,Dt=ne,ue=_e,qn=De,Xn=dt,Er=mr,Be=ft,ea="add_request_and_confirm",ta="_meteor_wallet_auth_key",Le=new br.EnvironmentStateAdapter_Sync({getString:e=>window.localStorage.getItem(e),setString:(e,t)=>window.localStorage.setItem(e,t),clear:e=>window.localStorage.removeItem(e)});new br.EnvironmentStateAdapter_Sync({getString:e=>window.sessionStorage.getItem(e),setString:(e,t)=>window.sessionStorage.setItem(e,t),clear:e=>window.sessionStorage.removeItem(e)});class yt{static async init({walletUrl:t,...r}){const n=new fe.keyStores.BrowserLocalStorageKeyStore,a=await(0,fe.connect)({keyStore:n,headers:{},walletUrl:(0,Dt.resolveWalletUrl)(r.networkId,t),...(0,Dt.getNetworkPreset)(r.networkId),...r}),o=new yt({near:a,appKeyPrefix:"near_app"});return o.isSignedIn()||await n.clear(),o}constructor({near:t,appKeyPrefix:r=t.config.contractName??"default"}){this._initializationPromises=[],this._near=t;const n=r+ta;this._authDataKey=n,this._authData=Le.getJson(n)??{allKeys:[]},this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,this._keyStore=t.connection.signer.keyStore}isExtensionInstalled(){return window.meteorWallet!=null}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId}async verifyOwner(t){const r=t.accountId??this.getAccountId(),n=await(0,ue.getMeteorPostMessenger)().connectAndWaitForResponse({actionType:J.EExternalActionType.verify_owner,inputs:{accountId:r,message:t.message},network:this._networkId});if(n.success)return n;throw new J.MeteorActionError({endTags:n.endTags,message:n.message})}async requestSignIn(t){const{keyPair:r,...n}=t,a=r??fe.KeyPair.fromRandom("ed25519");let o=a.getPublicKey().toString();const s=await(0,ue.getMeteorPostMessenger)().connectAndWaitForResponse({actionType:J.EExternalActionType.login,inputs:{public_key:o,...n},network:this._networkId});if(s.success){const{allKeys:c,accountId:d}=s.payload;return this._authData={accountId:d,allKeys:c,signedInContract:{contract_id:n.contract_id,public_key:o}},Le.setJson(this._authDataKey,this._authData),await this._keyStore.setKey(this._networkId,d,a),{success:!0,endTags:[],payload:{accessKey:a,accountId:d}}}else throw new J.MeteorActionError({endTags:s.endTags,message:s.message})}async signOut(){const t=this.getAccountId();if(this._authData.signedInContract!=null&&t!=null){const r={accountId:t,contractInfo:this._authData.signedInContract};await(0,ue.getMeteorPostMessenger)().connectAndWaitForResponse({actionType:J.EExternalActionType.logout,inputs:r,network:this._networkId})}this._authData={allKeys:[]},Le.clear(this._authDataKey)}async signMessage({message:t,nonce:r,recipient:n,callbackUrl:a,state:o,accountId:s}){const c=await(0,ue.getMeteorPostMessenger)().connectAndWaitForResponse({actionType:J.EExternalActionType.sign_message,inputs:{message:t,nonce:r,recipient:n,callbackUrl:a,state:o,accountId:s},network:this._networkId});if(c.success)return c.payload.state=o,c;throw new J.MeteorActionError({endTags:c.endTags,message:c.message})}async requestSignTransactions(t){const{transactions:r}=t,n=await this.transformTransactions(r);console.log("Transformed transactions",n);const a=await(0,ue.getMeteorPostMessenger)().connectAndWaitForResponse({actionType:J.EExternalActionType.sign,inputs:{transactions:n.map(o=>(0,Vn.serialize)(qn.SCHEMA_V2,o)).map(o=>P.from(o).toString("base64")).join(",")},network:this._networkId});if(a.success)return a.payload.executionOutcomes;throw new J.MeteorActionError({endTags:a.endTags,message:a.message})}account(){var r;const t=this.getAccountId();return(0,Yn.notNullEmpty)(t)&&((r=this._connectedAccount)==null?void 0:r.accountId)!==t&&(this._connectedAccount=new Or(this,this._near.connection,t)),this._connectedAccount}async transformTransactions(t){const r=this.account(),{networkId:n,signer:a,provider:o}=r.connection,s=await a.getPublicKey(r.accountId,n);return Promise.all(t.map(async(c,d)=>{const v=await r.accessKeyForTransaction(s);if(!v)throw new Error(`Failed to find matching key for transaction sent to ${c.receiverId}`);const p=c.actions.map(U=>(0,Er.createAction)(U)),E=await o.block({finality:"final"});return(0,Zn.createTransaction)(r.accountId,Xn.PublicKey.from(v.public_key),c.receiverId,new Be.BN(v.access_key.nonce).add(new Be.BN(d)).add(new Be.BN(1)),p,fe.utils.serialize.base_decode(E.header.hash))}))}}ce.MeteorWallet=yt;class Or extends fe.Account{constructor(t,r,n){super(r,n),this.meteorWallet=t}async signAndSendTransaction(...t){return typeof t[0]=="string"?this.signAndSendTransaction_direct({receiverId:t[0],actions:t[1]}):this.signAndSendTransaction_direct(t[0])}async trySendOrCreateTransaction({receiverId:t,actions:r}){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let a=await this.accessKeyForTransaction(n);if(a!=null&&a.access_key.permission!=="FullAccess"&&!await this.accessKeyMatchesTransaction(a,t,r))return{sent:!1,transaction:{receiverId:t,signerId:this.accountId,actions:r}};if(a&&n&&n.toString()===a.public_key)try{return{executionOutcome:await super.signAndSendTransaction({receiverId:t,actions:r.map(o=>(0,Er.createAction)(o))}),sent:!0}}catch(o){if(o.type!=="NotEnoughAllowance")throw o}return{sent:!1,transaction:{receiverId:t,signerId:this.accountId,actions:r}}}async signAndSendTransaction_direct({receiverId:t,actions:r}){const{transaction:n,sent:a,executionOutcome:o}=await this.trySendOrCreateTransaction({receiverId:t,actions:r});return a?o:(await this.meteorWallet.requestSignTransactions({transactions:[n]}))[0]}async accessKeyMatchesTransaction(t,r,n){const{access_key:{permission:a}}=t;if(a==="FullAccess")return!0;if(console.log("Comparing access key and actions",{accessKey:t,receiverId:r,actions:n}),a.FunctionCall){const{receiver_id:o,method_names:s}=a.FunctionCall;if(o===r&&s.includes(ea))return!0;if(o===r){if(n.length!==1)return!1;const c=n[0];if(console.log(c),c.type==="FunctionCall"){const d=c.params;return(!d.deposit||d.deposit.toString()==="0")&&(s.length===0||s.includes(d.methodName))}}}return!1}async accessKeyForTransaction(t){const r=await this.getAccessKeys();if(console.log("accessKeys",r),t){const a=r.find(o=>o.public_key.toString()===t.toString());if(a)return a}const n=this.meteorWallet._authData.allKeys;for(const a of r)if(n.indexOf(a.public_key)!==-1)return a;for(const a of r)if(a.access_key.permission==="FullAccess")return a;return null}}ce.ConnectedMeteorWalletAccount=Or;var Ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ENearNetworkSuffix=e.ENearNetwork=void 0,function(t){t.localnet="localnet",t.testnet="testnet",t.betanet="betanet",t.mainnet="mainnet"}(e.ENearNetwork||(e.ENearNetwork={})),function(t){t.testnet=".testnet",t.mainnet=".near"}(e.ENearNetworkSuffix||(e.ENearNetworkSuffix={}))})(Ar);(function(e){var t=j&&j.__createBinding||(Object.create?function(o,s,c,d){d===void 0&&(d=c);var v=Object.getOwnPropertyDescriptor(s,c);(!v||("get"in v?!s.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(o,d,v)}:function(o,s,c,d){d===void 0&&(d=c),o[d]=s[c]}),r=j&&j.__exportStar||function(o,s){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(s,c)&&t(s,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.setEnvConfig=e.ENearNetwork=void 0,r(ce,e),r(ne,e),r(Q,e),r(Pe,e);var n=Ar;Object.defineProperty(e,"ENearNetwork",{enumerable:!0,get:function(){return n.ENearNetwork}});var a=Me;Object.defineProperty(e,"setEnvConfig",{enumerable:!0,get:function(){return a.setEnvConfig}})})(Ne);var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof It<"u"?It:typeof self<"u"?self:{},we=function(e){return e&&e.Math==Math&&e},Z=we(typeof globalThis=="object"&&globalThis)||we(typeof window=="object"&&window)||we(typeof self=="object"&&self)||we(typeof Rt=="object"&&Rt)||function(){return this}()||Function("return this")(),vt={},x=function(e){try{return!!e()}catch{return!0}},ra=x,Y=!ra(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),na=x,Sr=!na(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),aa=Sr,me=Function.prototype.call,ge=aa?me.bind(me):function(){return me.apply(me,arguments)},wt={},Nr={}.propertyIsEnumerable,Tr=Object.getOwnPropertyDescriptor,oa=Tr&&!Nr.call({1:2},1);wt.f=oa?function(t){var r=Tr(this,t);return!!r&&r.enumerable}:Nr;var Cr=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},Ir=Sr,Pr=Function.prototype,ia=Pr.bind,ot=Pr.call,sa=Ir&&ia.bind(ot,ot),$=Ir?function(e){return e&&sa(e)}:function(e){return e&&function(){return ot.apply(e,arguments)}},Mr=$,ca=Mr({}.toString),la=Mr("".slice),_r=function(e){return la(ca(e),8,-1)},ua=$,fa=x,da=_r,ze=Object,ga=ua("".split),Dr=fa(function(){return!ze("z").propertyIsEnumerable(0)})?function(e){return da(e)=="String"?ga(e,""):ze(e)}:ze,ha=TypeError,Rr=function(e){if(e==null)throw ha("Can't call method on "+e);return e},pa=Dr,ya=Rr,mt=function(e){return pa(ya(e))},K=function(e){return typeof e=="function"},va=K,he=function(e){return typeof e=="object"?e!==null:va(e)},Ke=Z,wa=K,ma=function(e){return wa(e)?e:void 0},bt=function(e,t){return arguments.length<2?ma(Ke[e]):Ke[e]&&Ke[e][t]},ba=$,Fr=ba({}.isPrototypeOf),Ea=bt,Oa=Ea("navigator","userAgent")||"",jr=Z,ke=Oa,Ft=jr.process,jt=jr.Deno,Ut=Ft&&Ft.versions||jt&&jt.version,Wt=Ut&&Ut.v8,z,Te;Wt&&(z=Wt.split("."),Te=z[0]>0&&z[0]<4?1:+(z[0]+z[1]));!Te&&ke&&(z=ke.match(/Edge\/(\d+)/),(!z||z[1]>=74)&&(z=ke.match(/Chrome\/(\d+)/),z&&(Te=+z[1])));var Aa=Te,Gt=Aa,Sa=x,Ur=!!Object.getOwnPropertySymbols&&!Sa(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Gt&&Gt<41}),Na=Ur,Wr=Na&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ta=bt,Ca=K,Ia=Fr,Pa=Wr,Ma=Object,Gr=Pa?function(e){return typeof e=="symbol"}:function(e){var t=Ta("Symbol");return Ca(t)&&Ia(t.prototype,Ma(e))},_a=String,Da=function(e){try{return _a(e)}catch{return"Object"}},Ra=K,Fa=Da,ja=TypeError,Ua=function(e){if(Ra(e))return e;throw ja(Fa(e)+" is not a function")},Wa=Ua,Ga=function(e,t){var r=e[t];return r==null?void 0:Wa(r)},He=ge,xe=K,$e=he,Ba=TypeError,La=function(e,t){var r,n;if(t==="string"&&xe(r=e.toString)&&!$e(n=He(r,e))||xe(r=e.valueOf)&&!$e(n=He(r,e))||t!=="string"&&xe(r=e.toString)&&!$e(n=He(r,e)))return n;throw Ba("Can't convert object to primitive value")},Et={exports:{}},Bt=Z,za=Object.defineProperty,Ot=function(e,t){try{za(Bt,e,{value:t,configurable:!0,writable:!0})}catch{Bt[e]=t}return t},Ka=Z,ka=Ot,Lt="__core-js_shared__",Ha=Ka[Lt]||ka(Lt,{}),At=Ha,zt=At;(Et.exports=function(e,t){return zt[e]||(zt[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.23.3",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"});var xa=Rr,$a=Object,Br=function(e){return $a(xa(e))},Ja=$,Qa=Br,Za=Ja({}.hasOwnProperty),q=Object.hasOwn||function(t,r){return Za(Qa(t),r)},Va=$,Ya=0,qa=Math.random(),Xa=Va(1 .toString),Lr=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Xa(++Ya+qa,36)},eo=Z,to=Et.exports,Kt=q,ro=Lr,kt=Ur,zr=Wr,oe=to("wks"),re=eo.Symbol,Ht=re&&re.for,no=zr?re:re&&re.withoutSetter||ro,St=function(e){if(!Kt(oe,e)||!(kt||typeof oe[e]=="string")){var t="Symbol."+e;kt&&Kt(re,e)?oe[e]=re[e]:zr&&Ht?oe[e]=Ht(t):oe[e]=no(t)}return oe[e]},ao=ge,xt=he,$t=Gr,oo=Ga,io=La,so=St,co=TypeError,lo=so("toPrimitive"),uo=function(e,t){if(!xt(e)||$t(e))return e;var r=oo(e,lo),n;if(r){if(t===void 0&&(t="default"),n=ao(r,e,t),!xt(n)||$t(n))return n;throw co("Can't convert object to primitive value")}return t===void 0&&(t="number"),io(e,t)},fo=uo,go=Gr,Kr=function(e){var t=fo(e,"string");return go(t)?t:t+""},ho=Z,Jt=he,it=ho.document,po=Jt(it)&&Jt(it.createElement),yo=function(e){return po?it.createElement(e):{}},vo=Y,wo=x,mo=yo,kr=!vo&&!wo(function(){return Object.defineProperty(mo("div"),"a",{get:function(){return 7}}).a!=7}),bo=Y,Eo=ge,Oo=wt,Ao=Cr,So=mt,No=Kr,To=q,Co=kr,Qt=Object.getOwnPropertyDescriptor;vt.f=bo?Qt:function(t,r){if(t=So(t),r=No(r),Co)try{return Qt(t,r)}catch{}if(To(t,r))return Ao(!Eo(Oo.f,t,r),t[r])};var Re={},Io=Y,Po=x,Mo=Io&&Po(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),_o=he,Do=String,Ro=TypeError,Fe=function(e){if(_o(e))return e;throw Ro(Do(e)+" is not an object")},Fo=Y,jo=kr,Uo=Mo,be=Fe,Zt=Kr,Wo=TypeError,Je=Object.defineProperty,Go=Object.getOwnPropertyDescriptor,Qe="enumerable",Ze="configurable",Ve="writable";Re.f=Fo?Uo?function(t,r,n){if(be(t),r=Zt(r),be(n),typeof t=="function"&&r==="prototype"&&"value"in n&&Ve in n&&!n[Ve]){var a=Go(t,r);a&&a[Ve]&&(t[r]=n.value,n={configurable:Ze in n?n[Ze]:a[Ze],enumerable:Qe in n?n[Qe]:a[Qe],writable:!1})}return Je(t,r,n)}:Je:function(t,r,n){if(be(t),r=Zt(r),be(n),jo)try{return Je(t,r,n)}catch{}if("get"in n||"set"in n)throw Wo("Accessors not supported");return"value"in n&&(t[r]=n.value),t};var Bo=Y,Lo=Re,zo=Cr,Hr=Bo?function(e,t,r){return Lo.f(e,t,zo(1,r))}:function(e,t,r){return e[t]=r,e},xr={exports:{}},st=Y,Ko=q,$r=Function.prototype,ko=st&&Object.getOwnPropertyDescriptor,Nt=Ko($r,"name"),Ho=Nt&&(function(){}).name==="something",xo=Nt&&(!st||st&&ko($r,"name").configurable),Jr={EXISTS:Nt,PROPER:Ho,CONFIGURABLE:xo},$o=$,Jo=K,ct=At,Qo=$o(Function.toString);Jo(ct.inspectSource)||(ct.inspectSource=function(e){return Qo(e)});var Qr=ct.inspectSource,Zo=Z,Vo=K,Yo=Qr,Vt=Zo.WeakMap,qo=Vo(Vt)&&/native code/.test(Yo(Vt)),Xo=Et.exports,ei=Lr,Yt=Xo("keys"),ti=function(e){return Yt[e]||(Yt[e]=ei(e))},Zr={},ri=qo,Vr=Z,Ye=$,ni=he,ai=Hr,qe=q,Xe=At,oi=ti,ii=Zr,qt="Object already initialized",lt=Vr.TypeError,si=Vr.WeakMap,Ce,de,Ie,ci=function(e){return Ie(e)?de(e):Ce(e,{})},li=function(e){return function(t){var r;if(!ni(t)||(r=de(t)).type!==e)throw lt("Incompatible receiver, "+e+" required");return r}};if(ri||Xe.state){var X=Xe.state||(Xe.state=new si),ui=Ye(X.get),Xt=Ye(X.has),fi=Ye(X.set);Ce=function(e,t){if(Xt(X,e))throw new lt(qt);return t.facade=e,fi(X,e,t),t},de=function(e){return ui(X,e)||{}},Ie=function(e){return Xt(X,e)}}else{var ie=oi("state");ii[ie]=!0,Ce=function(e,t){if(qe(e,ie))throw new lt(qt);return t.facade=e,ai(e,ie,t),t},de=function(e){return qe(e,ie)?e[ie]:{}},Ie=function(e){return qe(e,ie)}}var di={set:Ce,get:de,has:Ie,enforce:ci,getterFor:li},gi=x,hi=K,Ee=q,ut=Y,pi=Jr.CONFIGURABLE,yi=Qr,Yr=di,vi=Yr.enforce,wi=Yr.get,Ae=Object.defineProperty,mi=ut&&!gi(function(){return Ae(function(){},"length",{value:8}).length!==8}),bi=String(String).split("String"),Ei=xr.exports=function(e,t,r){String(t).slice(0,7)==="Symbol("&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Ee(e,"name")||pi&&e.name!==t)&&(ut?Ae(e,"name",{value:t,configurable:!0}):e.name=t),mi&&r&&Ee(r,"arity")&&e.length!==r.arity&&Ae(e,"length",{value:r.arity});try{r&&Ee(r,"constructor")&&r.constructor?ut&&Ae(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=vi(e);return Ee(n,"source")||(n.source=bi.join(typeof t=="string"?t:"")),e};Function.prototype.toString=Ei(function(){return hi(this)&&wi(this).source||yi(this)},"toString");var Oi=K,Ai=Re,Si=xr.exports,Ni=Ot,qr=function(e,t,r,n){n||(n={});var a=n.enumerable,o=n.name!==void 0?n.name:t;if(Oi(r)&&Si(r,o,n),n.global)a?e[t]=r:Ni(t,r);else{try{n.unsafe?e[t]&&(a=!0):delete e[t]}catch{}a?e[t]=r:Ai.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},Xr={},Ti=Math.ceil,Ci=Math.floor,Ii=Math.trunc||function(t){var r=+t;return(r>0?Ci:Ti)(r)},Pi=Ii,en=function(e){var t=+e;return t!==t||t===0?0:Pi(t)},Mi=en,_i=Math.max,Di=Math.min,Ri=function(e,t){var r=Mi(e);return r<0?_i(r+t,0):Di(r,t)},Fi=en,ji=Math.min,Ui=function(e){return e>0?ji(Fi(e),9007199254740991):0},Wi=Ui,Gi=function(e){return Wi(e.length)},Bi=mt,Li=Ri,zi=Gi,er=function(e){return function(t,r,n){var a=Bi(t),o=zi(a),s=Li(n,o),c;if(e&&r!=r){for(;o>s;)if(c=a[s++],c!=c)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},Ki={includes:er(!0),indexOf:er(!1)},ki=$,et=q,Hi=mt,xi=Ki.indexOf,$i=Zr,tr=ki([].push),tn=function(e,t){var r=Hi(e),n=0,a=[],o;for(o in r)!et($i,o)&&et(r,o)&&tr(a,o);for(;t.length>n;)et(r,o=t[n++])&&(~xi(a,o)||tr(a,o));return a},rn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ji=tn,Qi=rn,Zi=Qi.concat("length","prototype");Xr.f=Object.getOwnPropertyNames||function(t){return Ji(t,Zi)};var Tt={};Tt.f=Object.getOwnPropertySymbols;var Vi=bt,Yi=$,qi=Xr,Xi=Tt,es=Fe,ts=Yi([].concat),rs=Vi("Reflect","ownKeys")||function(t){var r=qi.f(es(t)),n=Xi.f;return n?ts(r,n(t)):r},rr=q,ns=rs,as=vt,os=Re,is=function(e,t,r){for(var n=ns(t),a=os.f,o=as.f,s=0;s<n.length;s++){var c=n[s];!rr(e,c)&&!(r&&rr(r,c))&&a(e,c,o(t,c))}},ss=x,cs=K,ls=/#|\.prototype\./,pe=function(e,t){var r=fs[us(e)];return r==gs?!0:r==ds?!1:cs(t)?ss(t):!!t},us=pe.normalize=function(e){return String(e).replace(ls,".").toLowerCase()},fs=pe.data={},ds=pe.NATIVE="N",gs=pe.POLYFILL="P",hs=pe,tt=Z,ps=vt.f,ys=Hr,vs=qr,ws=Ot,ms=is,bs=hs,Es=function(e,t){var r=e.target,n=e.global,a=e.stat,o,s,c,d,v,p;if(n?s=tt:a?s=tt[r]||ws(r,{}):s=(tt[r]||{}).prototype,s)for(c in t){if(v=t[c],e.dontCallGetSet?(p=ps(s,c),d=p&&p.value):d=s[c],o=bs(n?c:r+(a?".":"#")+c,e.forced),!o&&d!==void 0){if(typeof v==typeof d)continue;ms(v,d)}(e.sham||d&&d.sham)&&ys(v,"sham",!0),vs(s,c,v,e)}},Os=tn,As=rn,Ss=Object.keys||function(t){return Os(t,As)},nr=Y,Ns=$,Ts=ge,Cs=x,rt=Ss,Is=Tt,Ps=wt,Ms=Br,_s=Dr,se=Object.assign,ar=Object.defineProperty,Ds=Ns([].concat),Rs=!se||Cs(function(){if(nr&&se({b:1},se(ar({},"a",{enumerable:!0,get:function(){ar(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(a){t[a]=a}),se({},e)[r]!=7||rt(se({},t)).join("")!=n})?function(t,r){for(var n=Ms(t),a=arguments.length,o=1,s=Is.f,c=Ps.f;a>o;)for(var d=_s(arguments[o++]),v=s?Ds(rt(d),s(d)):rt(d),p=v.length,E=0,U;p>E;)U=v[E++],(!nr||Ts(c,d,U))&&(n[U]=d[U]);return n}:se,Fs=Es,or=Rs;Fs({target:"Object",stat:!0,arity:2,forced:Object.assign!==or},{assign:or});var js=St,Us=js("toStringTag"),nn={};nn[Us]="z";var Ws=String(nn)==="[object z]",Gs=Ws,Bs=K,Se=_r,Ls=St,zs=Ls("toStringTag"),Ks=Object,ks=Se(function(){return arguments}())=="Arguments",Hs=function(e,t){try{return e[t]}catch{}},xs=Gs?Se:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=Hs(t=Ks(e),zs))=="string"?r:ks?Se(t):(n=Se(t))=="Object"&&Bs(t.callee)?"Arguments":n},$s=xs,Js=String,Qs=function(e){if($s(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Js(e)},Zs=Fe,Vs=function(){var e=Zs(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Ys=ge,qs=q,Xs=Fr,ec=Vs,ir=RegExp.prototype,tc=function(e){var t=e.flags;return t===void 0&&!("flags"in ir)&&!qs(e,"flags")&&Xs(ir,e)?Ys(ec,e):t},rc=Jr.PROPER,nc=qr,ac=Fe,sr=Qs,oc=x,ic=tc,Ct="toString",sc=RegExp.prototype,an=sc[Ct],cc=oc(function(){return an.call({source:"a",flags:"b"})!="/a/b"}),lc=rc&&an.name!=Ct;(cc||lc)&&nc(RegExp.prototype,Ct,function(){var t=ac(this),r=sr(t.source),n=sr(ic(t));return"/"+r+"/"+n},{unsafe:!0});function L(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(p){try{v(n.next(p))}catch(E){s(E)}}function d(p){try{v(n.throw(p))}catch(E){s(E)}}function v(p){p.done?o(p.value):a(p.value).then(c,d)}v((n=n.apply(e,t||[])).next())})}var uc="data:image/png;base64,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";const fc=(e,t)=>L(void 0,void 0,void 0,function*(){const r=new nt.keyStores.BrowserLocalStorageKeyStore(window.localStorage,"_meteor_wallet"),n=yield nt.connect(Object.assign(Object.assign({keyStore:r},t),{headers:{}}));return{wallet:new Ne.MeteorWallet({near:n,appKeyPrefix:"near_app"}),keyStore:r}}),dc=({options:e,logger:t,store:r,params:n})=>L(void 0,void 0,void 0,function*(){const a=yield fc(n,e.network),o=()=>L(void 0,void 0,void 0,function*(){const s=a.wallet.getAccountId(),c=a.wallet.account();if(!s||!c)return[];const d=yield c.connection.signer.getPublicKey(c.accountId,e.network.networkId);return[{accountId:s,publicKey:d?d.toString():""}]});return{signIn({contractId:s,methodNames:c=[]}){return L(this,void 0,void 0,function*(){t.log("MeteorWallet:signIn",{contractId:s,methodNames:c}),c.length?yield a.wallet.requestSignIn({methods:c,type:Ne.EMeteorWalletSignInType.SELECTED_METHODS,contract_id:s}):yield a.wallet.requestSignIn({type:Ne.EMeteorWalletSignInType.ALL_METHODS,contract_id:s});const d=yield o();return t.log("MeteorWallet:signIn",{contractId:s,methodNames:c,account:d[0]}),d})},signOut(){return L(this,void 0,void 0,function*(){a.wallet.isSignedIn()&&(yield a.wallet.signOut())})},isSignedIn(){return L(this,void 0,void 0,function*(){return a.wallet?a.wallet.isSignedIn():!1})},getAccounts(){return L(this,void 0,void 0,function*(){return o()})},verifyOwner({message:s}){return L(this,void 0,void 0,function*(){t.log("MeteorWallet:verifyOwner",{message:s});const c=yield a.wallet.verifyOwner({message:s});if(c.success)return c.payload;throw new Error(`Couldn't verify owner: ${c.message}`)})},signMessage({message:s,nonce:c,recipient:d,state:v}){return L(this,void 0,void 0,function*(){t.log("MeteorWallet:signMessage",{message:s,nonce:c,recipient:d,state:v});const p=a.wallet.getAccountId(),E=yield a.wallet.signMessage({message:s,nonce:c,recipient:d,accountId:p,state:v});if(E.success)return E.payload;throw new Error(`Couldn't sign message owner: ${E.message}`)})},signAndSendTransaction({signerId:s,receiverId:c,actions:d}){return L(this,void 0,void 0,function*(){t.log("MeteorWallet:signAndSendTransaction",{signerId:s,receiverId:c,actions:d});const{contract:v}=r.getState();if(!a.wallet.isSignedIn())throw new Error("Wallet not signed in");if(!c&&!v)throw new Error("No receiver found to send the transaction to");return a.wallet.account().signAndSendTransaction_direct({receiverId:c??v.contractId,actions:d})})},signAndSendTransactions({transactions:s}){return L(this,void 0,void 0,function*(){if(t.log("MeteorWallet:signAndSendTransactions",{transactions:s}),!a.wallet.isSignedIn())throw new Error("Wallet not signed in");return a.wallet.requestSignTransactions({transactions:s})})},buildImportAccountsUrl(){return`https://wallet.meteorwallet.app/batch-import?network=${a.wallet._networkId}`}}});function vc({iconUrl:e=uc,deprecated:t=!1}={}){return()=>L(this,void 0,void 0,function*(){return{id:"meteor-wallet",type:"injected",metadata:{available:!0,name:"Meteor Wallet",description:"Securely store and stake your NEAR tokens and compatible assets with Meteor.",iconUrl:e,deprecated:t,downloadUrl:"https://wallet.meteorwallet.app",useUrlAccountImport:!0},init:r=>dc(Object.assign(Object.assign({},r),{params:{iconUrl:e}}))}})}export{vc as setupMeteorWallet};
